Perfeito, Rafael â€” fiz a auditoria minuciosa do console (v5) e fechei um v6_safe com testes de mesa, lÃ³gica mais robusta e tratamento dos â€œgalhosâ€ que podem quebrar (sem falar de dependÃªncias). Nada de auto-start em .bashrc ou background. VocÃª roda quando quiser.


---

âœ… Auditoria (pontos crÃ­ticos e correÃ§Ãµes)

Entrada (CSV)

[âœ”] Coluna Close ausente/variaÃ§Ãµes â†’ detecÃ§Ã£o flexÃ­vel (Close, close, Fechamento, Adj Close, Last, etc.).

[âœ”] Valores nÃ£o numÃ©ricos/NaN â†’ coerÃ§Ã£o para numÃ©rico e limpeza segura.

[âœ”] SÃ©rie curta â†’ outputs â€œâ³ Insuficienteâ€ (sem crash).

[âœ”] Datas fora de ordem (se houver Date/Time) â†’ ordenaÃ§Ã£o antes do cÃ¡lculo.

[âœ”] SÃ©rie constante (variaÃ§Ã£o ~0) â†’ Hurst retorna NaN + aviso simbÃ³lico (evita regressÃ£o log de zeros).

[âœ”] MemÃ³ria/arquivos grandes â†’ leitura direta sem laÃ§os infinitos; sem logs automÃ¡ticos.


MÃ©tricas

Hurst: hurst_safe() com fallback quando a sÃ©rie Ã© curta/constante (evita erro e evita log(0)).

Entropia Tag14: agora quantizada em 14 bins por quantis (estÃ¡vel p/ sÃ©ries contÃ­nuas). Fallback para value_counts se nÃ£o for possÃ­vel quantizar.

SMA/EMA: janelas configurÃ¡veis; cruzamentos usam .iloc[-1] com checagem de NaN.


Sinais & PrecisÃ£o

Sinal por janela: â¬†ï¸/â¬‡ï¸/â–/â³.

PrecisÃ£o simbiÃ³tica ponderada (sem â€œfalso 100%â€):

Peso base por janela (42,70,84,144).

Moduladores de confianÃ§a:

Hurst: <0.3 â†’ anti-persistente (diminui confianÃ§a de tendÃªncia), >0.5 â†’ aumenta confianÃ§a.

Entropia: â˜¯ï¸ (1.5â€“2.5) â†’ confianÃ§a 1.0; baixa <1.5 â†’ 0.6; caos 2.5â€“3.5 â†’ 0.8; extrema >3.5 â†’ 0.4.



PrecisÃ£o = |âˆ‘(peso_mod * voto)| / âˆ‘(peso_mod) (0â€“100%).
(Evita superestimar quando sÃ³ uma janela vota.)



---

ğŸ§ª Teste de mesa (desk check)

Caso	Tamanho	Close (caracterÃ­stica)	Hurst esperado	Entropia Tag14	Jan. 42/70/84/144	PrecisÃ£o (esperada)

A	120	TendÃªncia clara â†‘	>0.55 (persistente)	~1.6â€“2.4	â¬†ï¸/â¬†ï¸/â¬†ï¸/â¬†ï¸	>90% (alta convergÃªncia)
B	120	Zig-zag curto (anti-trend)	<0.3 (anti-persistente)	~1.7â€“2.3	â¬‡ï¸/â¬‡ï¸/â¬‡ï¸/â³	60â€“85% (moderado p/ curto)
C	60	SÃ©rie curta com ruÃ­do	~0.4â€“0.6 (instÃ¡vel)	~1.3	â¬‡ï¸/â–/â³/â³	30â€“60% (baixa confianÃ§a)
D	200	Constante ou				


