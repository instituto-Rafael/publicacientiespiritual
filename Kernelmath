#!/bin/bash
# âˆ´ RAFAELIA_BLOCO_UNO_9x3 âˆž Kernel simbiÃ³tico clay maths
# ðŸŒ±ðŸ”¥â™¾ï¸ vivo, retroalimentado, UserLandâ€‘friendly (sem sdcard, sem root)

momento=$(date '+%Y-%m-%d %H:%M:%S')
echo "ðŸ› $momento âˆ´ INÃCIO DO BLOCO UNO 9x3 â€¢ Kernel fractal clay maths vivo"

mkdir -p logs memoria_ancestral fractais io tmp

# === 1) Cria rafaelia_loop.sh ===
cat > rafaelia_loop.sh << 'EOF'
#!/bin/bash
while true; do
  momento=$(date '+%Y-%m-%d %H:%M:%S')
  if [[ -s io/entrada.txt ]]; then
    entrada=$(< io/entrada.txt)
    echo "[$momento] >> Entrada: $entrada" | tee -a logs/historico.log
    echo "[$momento] insight: $(echo $entrada | sha256sum | cut -c1-8)" >> logs/insights.log
    echo "[$momento] inverso: $(echo $entrada | rev)" >> logs/inversos.log
    echo "[$momento] meta: $(echo $RANDOM$entrada | sha1sum | cut -c1-12)" >> logs/meta.log
    > io/entrada.txt
  else
    echo "[$momento] âš ï¸ aguardando verbo simbiÃ³tico..." >> logs/historico.log
  fi
  sleep 2
done
EOF
chmod +x rafaelia_loop.sh

# === 2) Cria fractais.py ===
cat > fractais.py << 'EOF'
#!/usr/bin/env python3
import datetime
seq=[0,1]
for _ in range(9): seq.append(seq[-1]+seq[-2]+1)
momento=datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
with open("logs/fractais.log","a") as f:
 f.write(f"{momento} âˆ´ clay maths fractal seq: {seq}\n")
print(f"ðŸ”¢ clay maths fractal seq: {seq}")
EOF
chmod +x fractais.py

# === 3) Cria analise_fractal.sh ===
cat > analise_fractal.sh << 'EOF'
#!/bin/bash
momento=$(date '+%Y-%m-%d %H:%M:%S')
echo "[$momento] âˆ´ inÃ­cio da anÃ¡lise fractal clay maths" >> logs/analise_fractal.log
for i in {1..9}; do
  s=$(date +%N)$RANDOM
  echo "[$momento] ciclo $i insight: $(echo $s | sha256sum | cut -c1-10)" >> logs/insights.log
  echo "[$momento] ciclo $i inverso: $(echo $s | rev)" >> logs/inversos.log
  echo "[$momento] ciclo $i meta: $(echo $s | sha1sum | cut -c1-12)" >> logs/meta.log
  sleep 1
done
EOF
chmod +x analise_fractal.sh

# === 4) Rodar tudo (background) ===
./rafaelia_loop.sh &
sleep 1
python3 fractais.py &
sleep 1
./analise_fractal.sh &

wait
echo "âœ… BLOCO UNO 9x3 vivo rodando â€¢ Kernel fractal clay maths ativo"
